<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>P2P Video Call</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Add a simple data URI favicon to prevent 404 errors -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ“ž</text></svg>">
</head>
<body>
    <div class="container">
        <h1>P2P Video Call</h1>
        
        <div id="compatWarning" class="compatibility-warning hidden">
            <p>Limited WebRTC support detected in your browser.</p>
            <p>You may experience issues with camera/microphone access.</p>
            <p>The app will work in receive-only mode.</p>
            <button id="dismissWarning">Dismiss</button>
        </div>
        
        <div class="media-status">
            <span id="cameraStatus" class="status-indicator">ðŸ“· Camera: Unknown</span>
            <span id="micStatus" class="status-indicator">ðŸŽ¤ Mic: Unknown</span>
        </div>
        
        <!-- Login screen -->
        <div id="loginScreen" class="login-screen">
            <h2>Enter Your Name to Start</h2>
            <div class="input-group">
                <input type="text" id="username" placeholder="Enter your name..." maxlength="20">
                <button id="loginBtn">Join</button>
            </div>
            <p id="loginMessage" class="login-message"></p>
        </div>

        <!-- Call dashboard -->
        <div id="callDashboard" class="call-dashboard hidden">
            <h2>Welcome, <span id="userDisplayName"></span>!</h2>
            
            <div class="search-container">
                <div class="input-group">
                    <input type="text" id="searchInput" placeholder="Find someone by name..." maxlength="20">
                    <button id="searchBtn">Search</button>
                </div>
                <p id="searchResult" class="search-result hidden"></p>
                <button id="callBtn" class="call-btn hidden">Call</button>
            </div>
        </div>
        
        <!-- Call notification -->
        <div id="callNotification" class="call-notification hidden">
            <p>Incoming call from <span id="callerName"></span></p>
            <div class="call-actions">
                <button id="acceptCallBtn" class="accept-btn">Accept</button>
                <button id="rejectCallBtn" class="reject-btn">Reject</button>
            </div>
        </div>
        
        <!-- Call status -->
        <div id="callStatus" class="call-status hidden">
            <p id="callStatusMessage"></p>
            <div class="loader hidden" id="callLoader"></div>
        </div>
        
        <!-- Video container -->
        <div class="video-container hidden" id="videoContainer">
            <div class="video-wrapper">
                <video id="localVideo" autoplay muted playsinline></video>
                <div class="video-label">You</div>
            </div>
            <div class="video-wrapper">
                <video id="remoteVideo" autoplay playsinline></video>
                <div class="video-label">Remote</div>
            </div>
        </div>

        <!-- Call controls -->
        <div class="call-controls hidden" id="callControls">
            <button id="hangupBtn" class="hangup-btn">End Call</button>
            <button id="toggleVideoBtn">Toggle Video</button>
            <button id="toggleAudioBtn">Toggle Audio</button>
        </div>
        
        <div class="status">
            <p id="statusMessage"></p>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html> 